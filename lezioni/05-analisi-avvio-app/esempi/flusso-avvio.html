<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flusso di Avvio App React</title>
    <script crossorigin src="https://unpkg.com/react@19/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@19/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .step {
            margin: 20px 0;
            padding: 20px;
            border-left: 4px solid #61dafb;
            background-color: #f8f9fa;
            border-radius: 0 8px 8px 0;
        }
        .step h3 {
            margin-top: 0;
            color: #282c34;
        }
        .code {
            background-color: #282c34;
            color: #abb2bf;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            overflow-x: auto;
        }
        .highlight {
            color: #61dafb;
            font-weight: bold;
        }
        .timeline {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .timeline-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 5px;
        }
        .timeline-number {
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-weight: bold;
        }
        .demo-section {
            background: #e8f5e8;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .button {
            background-color: #61dafb;
            color: #282c34;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 5px;
            transition: background-color 0.3s;
        }
        .button:hover {
            background-color: #21a0c4;
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            margin: 5px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Flusso di Avvio App React</h1>
        <p>Questa demo mostra passo-passo cosa succede quando viene avviata un'applicazione React.</p>
        
        <div class="timeline">
            <h2>‚è±Ô∏è Timeline di Avvio</h2>
            <div class="timeline-item">
                <div class="timeline-number">1</div>
                <div>Browser carica index.html</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">2</div>
                <div>Browser trova &lt;div id="root"&gt;</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">3</div>
                <div>Browser esegue main.jsx</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">4</div>
                <div>Import di React e ReactDOM</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">5</div>
                <div>ReactDOM.createRoot() eseguito</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">6</div>
                <div>root.render() chiamato</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">7</div>
                <div>React crea Virtual DOM</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">8</div>
                <div>React applica modifiche al DOM</div>
            </div>
            <div class="timeline-item">
                <div class="timeline-number">9</div>
                <div>App visibile nel browser</div>
            </div>
        </div>

        <div class="step">
            <h3>üìÅ 1. index.html - Template Base</h3>
            <p>Il browser carica questo file HTML che contiene il container per React:</p>
            <div class="code">
&lt;!doctype html&gt;<br>
&lt;html lang="en"&gt;<br>
&nbsp;&nbsp;&lt;head&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;meta charset="UTF-8" /&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;title&gt;Vite + React&lt;/title&gt;<br>
&nbsp;&nbsp;&lt;/head&gt;<br>
&nbsp;&nbsp;&lt;body&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;div id="root"&gt;&lt;/div&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;script type="module" src="/src/main.jsx"&gt;&lt;/script&gt;<br>
&nbsp;&nbsp;&lt;/body&gt;<br>
&lt;/html&gt;
            </div>
        </div>

        <div class="step">
            <h3>üéØ 2. main.jsx - Entry Point</h3>
            <p>Questo √® il file che avvia tutto. Analizziamo ogni riga:</p>
            <div class="code">
// 1. Import delle dipendenze<br>
import React from 'react'<br>
import ReactDOM from 'react-dom/client'<br>
import App from './App.jsx'<br>
import './index.css'<br>
<br>
// 2. Creazione del root<br>
const root = ReactDOM.createRoot(document.getElementById('root'))<br>
<br>
// 3. Rendering dell'app<br>
root.render(<br>
&nbsp;&nbsp;&lt;React.StrictMode&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;App /&gt;<br>
&nbsp;&nbsp;&lt;/React.StrictMode&gt;<br>
)
            </div>
        </div>

        <div class="step">
            <h3>‚öôÔ∏è 3. ReactDOM.createRoot()</h3>
            <p>Questa funzione crea un "root" per l'applicazione React:</p>
            <div class="code">
// Trova l'elemento con id="root" nel DOM<br>
const rootElement = document.getElementById('root')<br>
<br>
// Crea un root React per quell'elemento<br>
const root = ReactDOM.createRoot(rootElement)<br>
<br>
// Il root pu√≤ ora renderizzare componenti React
            </div>
        </div>

        <div class="step">
            <h3>üîÑ 4. root.render()</h3>
            <p>Questa funzione renderizza l'applicazione nel DOM:</p>
            <div class="code">
// Renderizza il componente App nel root<br>
root.render(&lt;App /&gt;)<br>
<br>
// React.StrictMode aiuta a rilevare problemi in sviluppo<br>
root.render(<br>
&nbsp;&nbsp;&lt;React.StrictMode&gt;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;App /&gt;<br>
&nbsp;&nbsp;&lt;/React.StrictMode&gt;<br>
)
            </div>
        </div>

        <div class="demo-section">
            <h3>üéÆ Demo Interattiva</h3>
            <p>Interagisci con questa demo per vedere il flusso di avvio in azione:</p>
            <div id="demo-container"></div>
        </div>

        <div class="step">
            <h3>üìä 5. Cosa Succede Durante il Rendering</h3>
            <ol>
                <li><strong>Mounting:</strong> Il componente App viene montato</li>
                <li><strong>Virtual DOM:</strong> React crea una rappresentazione virtuale del DOM</li>
                <li><strong>Diffing:</strong> React confronta il Virtual DOM con il DOM reale</li>
                <li><strong>Commit:</strong> React applica solo le modifiche necessarie</li>
                <li><strong>useEffect:</strong> Gli effetti vengono eseguiti dopo il rendering</li>
            </ol>
        </div>

        <div class="step">
            <h3>üîç 6. Debugging del Flusso</h3>
            <p>Aggiungi questi log per tracciare il flusso di avvio:</p>
            <div class="code">
// main.jsx<br>
console.log('1. main.jsx caricato')<br>
<br>
import React from 'react'<br>
import ReactDOM from 'react-dom/client'<br>
import App from './App.jsx'<br>
<br>
console.log('2. Dipendenze importate')<br>
<br>
const root = ReactDOM.createRoot(document.getElementById('root'))<br>
console.log('3. Root creato')<br>
<br>
root.render(&lt;App /&gt;)<br>
console.log('4. App renderizzata')
            </div>
        </div>

        <div class="step">
            <h3>üí° 7. Best Practices</h3>
            <ul>
                <li><strong>Mantieni main.jsx semplice:</strong> Solo l'essenziale per avviare l'app</li>
                <li><strong>Usa React.StrictMode:</strong> Aiuta a rilevare problemi in sviluppo</li>
                <li><strong>Gestisci gli errori:</strong> Implementa Error Boundaries</li>
                <li><strong>Monitora le performance:</strong> Usa React DevTools</li>
            </ul>
        </div>
    </div>

    <script type="text/babel">
        // Demo interattiva del flusso di avvio
        function StartupDemo() {
            const [logs, setLogs] = React.useState([]);
            const [step, setStep] = React.useState(0);
            
            const addLog = (message) => {
                const timestamp = new Date().toLocaleTimeString();
                setLogs(prev => [...prev, `[${timestamp}] ${message}`]);
            };
            
            React.useEffect(() => {
                addLog('üöÄ Demo component montato');
                
                return () => {
                    addLog('üî¥ Demo component smontato');
                };
            }, []);
            
            React.useEffect(() => {
                if (step > 0) {
                    addLog(`üîÑ Step ${step} completato`);
                }
            }, [step]);
            
            const simulateStartup = () => {
                setLogs([]);
                setStep(0);
                
                setTimeout(() => {
                    addLog('1. Browser carica index.html');
                    setStep(1);
                }, 500);
                
                setTimeout(() => {
                    addLog('2. Browser trova <div id="root">');
                    setStep(2);
                }, 1000);
                
                setTimeout(() => {
                    addLog('3. Browser esegue main.jsx');
                    setStep(3);
                }, 1500);
                
                setTimeout(() => {
                    addLog('4. Import di React e ReactDOM');
                    setStep(4);
                }, 2000);
                
                setTimeout(() => {
                    addLog('5. ReactDOM.createRoot() eseguito');
                    setStep(5);
                }, 2500);
                
                setTimeout(() => {
                    addLog('6. root.render() chiamato');
                    setStep(6);
                }, 3000);
                
                setTimeout(() => {
                    addLog('7. React crea Virtual DOM');
                    setStep(7);
                }, 3500);
                
                setTimeout(() => {
                    addLog('8. React applica modifiche al DOM');
                    setStep(8);
                }, 4000);
                
                setTimeout(() => {
                    addLog('9. App visibile nel browser');
                    setStep(9);
                }, 4500);
            };
            
            return (
                <div>
                    <button className="button" onClick={simulateStartup}>
                        Simula Avvio App
                    </button>
                    
                    <div style={{ marginTop: '20px' }}>
                        <h4>üìù Log di Avvio:</h4>
                        {logs.map((log, index) => (
                            <div key={index} className="log">
                                {log}
                            </div>
                        ))}
                    </div>
                    
                    <div style={{ marginTop: '20px' }}>
                        <h4>üìä Progresso: {step}/9</h4>
                        <div style={{ 
                            width: '100%', 
                            backgroundColor: '#e9ecef', 
                            borderRadius: '4px',
                            overflow: 'hidden'
                        }}>
                            <div style={{ 
                                width: `${(step / 9) * 100}%`, 
                                height: '20px', 
                                backgroundColor: '#61dafb',
                                transition: 'width 0.5s ease'
                            }}></div>
                        </div>
                    </div>
                </div>
            );
        }
        
        // Rendering della demo
        const demoRoot = ReactDOM.createRoot(document.getElementById('demo-container'));
        demoRoot.render(<StartupDemo />);
    </script>
</body>
</html>
